{% extends "base.html" %}

{% block title %}Live{% endblock %}

{% block body %}
<h1>Live name: {{live.name}}</h1>
<h1>User name: {{live.user.username}}</h1>
<div class="row">
    <div class="col-md-9">
        <video id="videoElement" width="100%" height="500px" controls="controls"></video>
    </div>
    <div class="col-md-3">
    </div>
</div>
{% endblock %}

{% block tail_js %}
{{ super() }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.3.3/flv.min.js"></script>
<script>
if (flvjs.isSupported()){
    var videoElement = document.getElementById('videoElement');
    var flvPlayer = flvjs.createPlayer({
        type:'flv',
        isLive:true,
        url:'https://cn-sdjn-cu-live-04.live-play.acgvideo.com/live-bvc/881955/live_10053034_7765480.flv?expires=1523816438&ssig=wMk3a3wDUiS7lrRqWrxC8g&oi=2071385518'
    });
    flvPlayer.attachMediaElement(videoElement);
    flvPlayer.load();
    flvPlayer.play();
}
</script>
{% endblock %}
